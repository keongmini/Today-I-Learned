## 인터넷 통신

클라이언트와 서버가 먼 곳에 있으면?  
중간에 수많은 노드를 거쳐서 안전하게 넘어감 - 이 과정을 이해해보자

## IP(인터넷 프로토콜)
복잡한 인터넷망에서의 최소한의 규칙
- 지정한 IP주소로 메시지 전달
- 패킷(packet)이라는 통신 단위로 데이터 전달
- IP 패킷 정보: 출발지 IP, 목적지 IP 등등
- 위의 정보를 포함한 클라이언트 패킷(출발지)을 전달 -> 노드끼리 전달하면서 서버(목적지)에 도달

한계점
  - 비연결성: 패킷을 받은 대상이 없거나 서비스 불능 상태여도 전송됨
  - 비신뢰성: 전달되는 중간에 패킷이 소실되거나 패킷이 순서대로 도착하지 않는 경우
  - 프로그램 그분: 같은 IP를 사용하는 서버가 여러개일 경우, 어떻게 구분할지

이런 한계점을 IP만으로는 해결할 수 없음 -> TCP/UDP 사용

## TCP, UDP

> 인터넷 프로토콜 스택의 4계층  
> 1. 애플리케이션 계층 - HTTP, FTP
> 2. 전송 계층 - TCP, UDP
> 3. 인터넷 계층 - IP
> 4. 네트워크 인터페이스 계층

예시)
프래그램이 메시지 생성 -> socket 라이브러리를 통해 메시지 전달 -> 메시지에 TCP 정보 포함 -> 에 IP 정보 포함 = IP 패킷 생성 -> LAN 카드를 통해서 전달

TCP/IP 패킷 정보: 출발지 IP, 목적지 IP + 출발지 PORT, 목적지 PORT, 전송제어, 순서, 검증정보 등등

### TCP(전송 제어 프로토콜, Transmission Control Protocl)
- 연결지향: 연결 후 메시지 전달
  > TCP 3 way handshake   
  > 1. 클라이언트에서 전송하면 SYN(접속 요청) 메시지 전달: 클라이언트 -> 서버
  > 2. SYN + ACK(요청수락) 답장: 서버 -> 클라이언트
  > 3. ACK - 연결됐다! 인식 후 데이터 전송: 클라이언트 -> 서버
  >
  > **가상 연결!**
  > 
- 데이터 전달 보증 (데이터 전송 후 잘 받았다는 답장 받음)
- 순서 보장
- 신뢰할 수 있는 프로토콜, 대부분의 애플리케이션에서 사용

### UDP(사용자 데이터그램 프로토콜, User Datagram Protocol)
- 기능이 없음(하얀 도화지), 데이터 전달 보장x, 순서 보장x
- IP와 거의 같음 + PORT + 체크섬(전달된 메시지가 맞는지 확인) 정도만 가능
- TCP의 속도는 최적화할 수 없음 -> UDP를 이용해서 애플리케이션에서 추가 작업하여 최적화

## PORT
한번에 둘 이상을 연결해야 할 경우?

PORT: 같은 IP 내에서 프로세스 구분

0~65535 할당 가능  
0~1023 잘 알려진 포트, 사용하지 않는 것이 좋음
  - FTP: 20, 21
  - TELNET: 23
  - HTTP: 80
  - HTTPS: 443

## DNS
IP는 기억하기 어렵고 변경될 수 있음

DNS(도메인 네임 시스템, Domain Name System) - 전화번호부같은 역할 도메인명으로 IP주소 변환

도메인으로 접근 - DNS서버에서 IP주소로 응답 - 접속
