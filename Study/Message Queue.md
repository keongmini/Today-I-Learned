## Message Queue

메시지큐
  - 프로세스 또는 프로그램 간에 데이터를 교환할 때 사용하는 통신방법 중 하나
  - 서버리스 및 마이크로 서비스 아키텍처에 사용되는 비동기식 서비스 대 서비스 통신 형태 
  - 메시지 지향 미들웨어(MOM)를 구현하는 시스템
    > 메시지 지향 미들웨어: 비동기 메시지를 사용하는 응용 프로그램들 사이에서 데이터를 송수신하는 것
    > 메시지: 요청, 응답, 오류 메시지, 단순 정보 등의 작은 데이터

  - 메시지를 임시로 저장하는 간단한 버퍼, 메시지 전송 및 수신을 위해 중간에 메시지 큐를 두는 것
    <img src="https://user-images.githubusercontent.com/50273712/133918874-2664898b-a080-4df6-bd21-fad7a204029d.png" />

    메시지 전송 시 Producer 컴포넌트가 메시지를 메시지 큐에 추가 -> Consumer 컴포넌트가 메시지를 검색하고 이를 사용해 어떤 작업을 수행할 때까지 메시지 큐에 저장
    각 메시지는 하나의 소비자에 의해 한번만 처리 가능 -> 일대일 통신

메시지큐 사용 이유
  - Consumer가 실제로 메시지를 어느 시점에 처리하는지 보장X, 언젠가는 큐에 있는 메시지가 처리될 것이라고 믿는 것
    -> 애플리케이션의 부가적인 기능에 사용하는 것이 적합

예시
  1. 이메일 전송
    비밀번호 재설정, 회원가입 인증 코드 메일과 같이 즉각적으로 수신되지 않아도 응답 지연이 어느 정도 허용되고 애플리케이션의 핵심 기능이 아닌 경우 사용
    이메일 전송 전용 서비스는 이메일 생산 위치와 상관없이 메시지 전송
    메시지큐에 들어오는 메시지 수가 많아지면 인스턴스를 하나 더 두어 확장 가능 -> 확장성 뛰어남

  2. 블로그 포스팅
    블로그 사용자가 용량이 매우 큰 이미지를 업로드할 경우, 블로그 서비스의 응답 시간을 저해하지 않으면서 사용자들에게 유연성을 제공하는 방법 -> 사용자가 업로드한 이미지를 즉각 처리하지 않고 사후 처리하여 최적화 
    고용량 이미지 업로드 후 이미지는 저장소에 전송 -> 이미지 최적화 서비스의 메시지큐에 담았다가 최적화 후 이전 이미지를 대체 

이점 
  1. 비동기: 큐에 넣어두었다가 나중에 처리 <-> 동기화 방식은 메시지가 많이 전송될 경우 병목 발생 가능, 후 순위 요청에 대한 응답 지연
  2. 낮은 결합도: 생산자 서비스와 소비자 서비스가 독립적으로 행동
  3. 확장성: 생산자 또는 소비자 서비스를 원하는대로 확장 가능
  4. 탄력성: 소비자 서비스가 중단되어도 애플리케이션 중단x, 메시지큐에 저장됨 -> 소비자 서비스 재시작되면 추가 설정 또는 작업 없이 처리 시작 가능
  5. 보장성: 큐에 보관되는 모든 메시지가 결국 소비사 서비스에게 전달된다는 보장 제공

RabbitMQ, Kafka 같은 오픈소스 시스템 존재 

참고. [메시지 큐에 대해 알아보자!](https://tecoble.techcourse.co.kr/post/2021-09-19-message-queue/)

종류 - 추가 예정  
참고. [메시지 큐와 종류 그리고 비교](https://err0rcode7.github.io/backend/2021/06/19/%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90%EC%99%80-%EC%A2%85%EB%A5%98-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EB%B9%84%EA%B5%90.html)
